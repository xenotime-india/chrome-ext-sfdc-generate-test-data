{"version":3,"sources":["inlineExecute.js"],"names":["T_DATA","data","mode","re","match","exec","window","location","href","recordId","sforce","jsforce","Connection","serverUrl","getServerURL","sessionId","__getCookie","sobject","describeGlobal","then","res","sobjects","find","item","keyPrefix","substring","currentSobject","name","describe","result","values","getObjectValues","fields","chrome","runtime","sendMessage","action","status","catch","err","error","console"],"mappings":"AAAA,IAAIA,OAASC,SAEb,GAAI,gBAAkBD,OAAOE,KAAM,CACjC,IAAIC,GAAK,kBACLC,MAAQD,GAAGE,KAAKC,OAAOC,SAASC,MAEpC,GAAGJ,MAAO,CACR,IAAIK,SAAWL,MAAM,GACjBM,OAAS,IAAIC,QAAQC,YACvBC,UAAYC,eACZC,UAAYC,YAAY,SAEtBC,WACJP,OAAOQ,iBAAiBC,KAAK,SAASC,GACpC,OAAOA,EAAIC,SAASC,KAAK,SAAUC,GACjC,OAAOA,EAAKC,WAAaf,SAASgB,UAAU,EAAG,OAEhDN,KAAK,SAAUO,GAEhB,OADAT,QAAUS,EACHhB,OAAOO,QAAQS,EAAeC,MAAMC,aAC1CT,KAAK,SAAUU,GAChB,OAAUC,OAAQC,kBAAmBC,OAASH,EAAOG,UACpDb,KAAK,SAAUU,GAChBI,OAAOC,QAAQC,aACbC,OAAQpC,OAAOE,KACf8B,OAAQH,EAAOG,OACfF,OAAQD,EAAOC,OACfb,QAASA,QACToB,OAAQ,QAETC,MAAM,SAAUC,GACjBN,OAAOC,QAAQC,aACbC,OAAQpC,OAAOE,KACfmC,OAAQ,IACRG,MAAOD,IAETE,QAAQD,MAAMD,UAGhBN,OAAOC,QAAQC,aACbC,OAAQpC,OAAOE,KACfmC,OAAQ","file":"inlineExecute.min.js","sourcesContent":["var T_DATA = data || {};\n\nif (\"GET_METADATA\" == T_DATA.mode) {\n  var re = /.com\\/(\\w{15})/g;\n  var match = re.exec(window.location.href);\n  debugger;\n  if(match) {\n    var recordId = match[1];\n    var sforce = new jsforce.Connection({\n      serverUrl : getServerURL(),\n      sessionId : __getCookie('sid')\n    });\n    var sobject = {};\n    sforce.describeGlobal().then(function(res) {\n      return res.sobjects.find(function (item) {\n        return item.keyPrefix == recordId.substring(0, 3);\n      });\n    }).then(function (currentSobject) {\n      sobject = currentSobject;\n      return sforce.sobject(currentSobject.name).describe();\n    }).then(function (result) {\n      return  { values: getObjectValues(), fields : result.fields };\n    }).then(function (result) {\n      chrome.runtime.sendMessage({\n        action: T_DATA.mode,\n        fields: result.fields,\n        values: result.values,\n        sobject: sobject,\n        status: 200\n      })\n    }).catch(function (err)  {\n      chrome.runtime.sendMessage({\n        action: T_DATA.mode,\n        status: 401,\n        error: err\n      })\n      console.error(err);\n    });\n  } else {\n    chrome.runtime.sendMessage({\n      action: T_DATA.mode,\n      status: 401\n    })\n  }\n}"]}