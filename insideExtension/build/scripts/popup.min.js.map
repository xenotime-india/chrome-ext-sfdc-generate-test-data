{"version":3,"sources":["popup.js"],"names":["$","chrome","tabs","query","active","currentWindow","e","isBlank","t","getParser","url","match","exec","hostname","indexOf","callPage","mode","jQuery","html","hide","runtime","onMessage","addListener","n","status","action","makeApexCode","fields","values","sobject","data","tab","length","executeScript","id","code","JSON","stringify","file","ex","error","forEach","element","name","label","type","Object","assign","showCustomDomain","getObjectIdFromUri","window","location","href","i","alert","o","s","l","c","u","d","f","p","value","toString","rtrim","h","m","getFieldCode","v","push","y","b","x","getSpaceByNum","w","Prism","highlightElement"],"mappings":"AAAAA,EAAE,WAEAC,OAAOC,KAAKC,OACVC,QAAQ,EACRC,eAAe,GACd,SAASC,GACV,IAAKC,QAAQD,EAAE,IAAK,CAClB,IAAIE,EAAIC,UAAUH,EAAE,GAAGI,KAEnBC,EADK,kBACMC,KAAKN,EAAE,GAAGI,KACzB,GAAIF,EAAEK,SAASC,QAAQ,mBAAqB,GAAKH,EAC/C,OAAOI,UAAUC,KAAO,iBAGxBC,OAAO,cAAcC,KAAK,gHAC1BD,OAAO,WAAWE,UAKxBlB,OAAOmB,QAAQC,UAAUC,YAAY,SAAShB,EAAGE,EAAGe,GACnC,KAAZjB,EAAEkB,QACa,gBAAZlB,EAAEmB,QACJC,cAAcC,OAAQrB,EAAEqB,OAAQC,OAAQtB,EAAEsB,OAAQC,QAASvB,EAAEuB,cAMrE,IAAId,SAAW,SAASe,GACtB7B,OAAOC,KAAKC,OACVC,QAAQ,EACRC,eAAe,GACd,SAAS0B,GACV,GAAI,GAAKA,EAAIC,OACX,IACE/B,OAAOC,KAAK+B,cAAcF,EAAI,GAAGG,IAC/BC,KAAM,cAAgBC,KAAKC,UAAUP,GAAQ,KAC5C,WACD7B,OAAOC,KAAK+B,cAAcF,EAAI,GAAGG,IAC/BI,KAAM,gCACL,gBAGL,MAAOC,GACP,OAAQC,MAAOD,OAMnBb,aAAe,SAASpB,GAC1B,IAAIqB,KACJrB,EAAEqB,OAAOc,QAAQ,SAASC,GACxB,IAAIZ,KACJA,EAAKY,EAAQC,OAAUC,MAAOF,EAAQE,MAAOC,KAAKH,EAAQG,MACjDC,OAAOC,OAAOpB,EAAOG,KAEhC,IAAIF,EAAStB,EAAEsB,OACf,GAAIrB,QAAQoB,GAAS,OAAOqB,kBAC1BR,OAAO,IAEDS,mBAAmBC,OAAOC,SAASC,MAA3C,IACEC,EAAI/C,EAAEuB,QAAQc,KAChB,GAAIpC,QAAQ8C,GAAI,OAAOC,MAAM,kBAC7B,IAAK,IAAIC,EAAIF,EAAI,eAAiBA,EAAI,IAAYG,KAAQC,KAAQC,EAAI,EAAGC,EAAI,EAAGC,EAAI,EAAGA,EAAIhC,EAAOI,OAAQ4B,IAAK,CAC7G,IAAIC,EAAIjC,EAAOgC,GACbE,EAAID,EAAEE,MACRxD,QAAQuD,KAAOA,EAAI,KAAMA,EAAIA,EAAEE,WAAWC,QAC1C,IAAK,IAAIC,KAAKvC,EACZ,GAAI,aAAeuC,GAAK,kBAAoBA,GAAK,SAAWA,EAAG,CAC7D,IACIC,EAAIC,aAAaP,EADblC,EAAOuC,IAEf,GAAI,MAAQC,EAAG,CACb,IAAIE,EAAI,OAASH,EAAI,MAAQC,EAC7B5D,QAAQuD,IAAMH,IAEdH,EAAEc,MACAnC,KAAMkC,EACN9D,QAASA,QAAQuD,KAEnBL,EAAEa,KAAK,MAAQT,EAAEjB,OACjBc,EAAIW,EAAErC,OAAS0B,EAAIW,EAAErC,OAAS0B,IAIjC,IAAIa,EAAI,EAAb,IAAgBX,EAAI,EAAGA,EAAIJ,EAAExB,OAAQ4B,IAAK,CACxC,IAAIY,EAAIhB,EAAEI,GAERa,GADAJ,EAAIG,EAAErC,KACFuC,cAAchB,EAAIW,EAAErC,SACxB2C,EAAI,GAAKf,EAAI,GAAK,KACpB,IAAKY,EAAEjE,QAGLgD,GAAKc,KAFLE,GACaZ,EAAI,GAAK,KACTgB,EAAIF,EAAIhB,EAAEG,GAGpBS,GADGT,GAAKJ,EAAExB,OAAS,EAAI,GAAK,KACpB2C,EAAIF,EAAIhB,EAAEG,GAEzBL,GAAK,qBACLtC,OAAO,cAAcC,KAAKqC,GAC1BqB,MAAMC,iBAAiB5D,OAAO,cAAc,IAC5CA,OAAO,WAAWE","file":"popup.min.js","sourcesContent":["$(function () {\n\n  chrome.tabs.query({\n    active: !0,\n    currentWindow: !0\n  }, function(e) {\n    if (!isBlank(e[0])) {\n      var t = getParser(e[0].url);\n      var re = /.com\\/(\\w{15})/g;\n      var match = re.exec(e[0].url);\n      if (t.hostname.indexOf(\"salesforce.com\") >= 0 && match) {\n        return callPage({mode : \"GET_METADATA\"});\n      }\n      else {\n        jQuery('#some-code').html('\\n\\nIt looks like you are opening me on a \\nnon-Salesforce.com domain or non-sobject detail page...\\n\\n\\n:-(');\n        jQuery('.holder').hide();\n      }\n    }\n  });\n\n  chrome.runtime.onMessage.addListener(function(e, t, n) {\n    if(e.status == 200) {\n      if (e.action == 'GET_METADATA') {\n        makeApexCode({fields: e.fields, values: e.values, sobject: e.sobject });\n      }\n    }\n  })\n});\n\nvar callPage = function(data) {\n  chrome.tabs.query({\n    active: !0,\n    currentWindow: !0\n  }, function(tab) {\n    if (0 != tab.length) {\n      try {\n        chrome.tabs.executeScript(tab[0].id, {\n          code: \"var data = \" + JSON.stringify(data) + \";\"\n        }, function () {\n          chrome.tabs.executeScript(tab[0].id, {\n            file: 'scripts/inlineExecute.min.js'\n          }, function() {\n          })\n        })\n      } catch (ex) {\n        return {error: ex};\n      }\n    }\n  })\n}\n\nvar makeApexCode = function(e) {\n  var fields = {};\n  e.fields.forEach(function(element) {\n    var data  = {};\n    data[element.name] = { label: element.label, type:element.type  };\n    fields : Object.assign(fields,data);\n  });\n  var values = e.values;\n  if (isBlank(fields)) return showCustomDomain({\n    error: !0\n  });\n  var r = getObjectIdFromUri(window.location.href),\n    i = e.sobject.name;\n  if (isBlank(i)) return alert(\"sObject ERROR!\");\n  for (var o = i + \" sobj = new \" + i + \"(\", a = o, s = [], l = [], c = 0, u = 0, d = 0; d < values.length; d++) {\n    var f = values[d],\n      p = f.value;\n    isBlank(p) && (p = \" \"), p = p.toString().rtrim();\n    for (var h in fields)\n      if (\"CreatedBy\" != h && \"LastModifiedBy\" != h && \"Owner\" != h) {\n        var g = fields[h];\n        var m = getFieldCode(f, g);\n        if (null != m) {\n          var v = \"\\n  \" + h + \" = \" + m;\n          isBlank(p) || u++;\n\n          s.push({\n            code: v,\n            isBlank: isBlank(p)\n          });\n          l.push(\"// \" + f.label);\n          c = v.length > c ? v.length : c\n        }\n      }\n  }\n  for (var y = 0, d = 0; d < s.length; d++) {\n    var b = s[d],\n      v = b.code,\n      x = getSpaceByNum(c - v.length),\n      w = 0 == d ? \"\" : \"  \";\n    if (!b.isBlank) {\n      y++;\n      var T = y == u ? \"\" : \",\";\n      o += v + T + w + x + l[d]\n    }\n    var T = d == s.length - 1 ? \"\" : \",\";\n    a += v + T + w + x + l[d]\n  }\n  o += \"\\n);\\ninsert sobj;\", a += \"\\n);\\ninsert sobj;\";\n  jQuery('#some-code').html(o);\n  Prism.highlightElement(jQuery('#some-code')[0]);\n  jQuery('.holder').hide();\n}"]}